#root {
  --bg: #0f1115;
  --bg-alt: rgba(255,255,255,0.04);
  --card: rgba(255,255,255,0.06);
  --card-border: rgba(255,255,255,0.08);
  --accent: #4ade80; /* green */
  --accent-grad: linear-gradient(135deg,#4ade80,#2dd4bf 60%, #60a5fa);
  --text: #e8eef2;
  --text-dim: #9aa4af;
  --danger: #ef4444;
  --warn: #f59e0b;
  --radius: 18px;
  --trans: 160ms cubic-bezier(.4,.4,.2,1);
  max-width: 1180px;
  margin: 0 auto;
  padding: 2.5rem 2rem 4rem;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
  color: var(--text);
}

body { background: radial-gradient(circle at 20% 20%, #1b2430 0%, #0f1115 70%); }

/* Top navigation bar */
.topbar { display:flex; align-items:center; justify-content:space-between; gap:1.2rem; background:var(--card); border:1px solid var(--card-border); padding:.85rem 1.1rem; border-radius:20px; backdrop-filter: blur(18px) saturate(140%); box-shadow:0 4px 14px -4px rgba(0,0,0,.5); position:sticky; top:0; z-index:40; }
.topbar .logo { font-weight:700; letter-spacing:.5px; cursor:pointer; background:var(--accent-grad); -webkit-background-clip:text; background-clip:text; color:transparent; font-size:1.1rem; }
.topbar nav { display:flex; gap:.8rem; }
.topbar nav a { position:relative; font-size:.8rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; padding:.55rem .85rem; border-radius:12px; color:var(--text-dim); text-decoration:none; transition: background var(--trans), color var(--trans); }
.topbar nav a.active, .topbar nav a:hover { background:rgba(255,255,255,.08); color:var(--text); }
.topbar .actions { display:flex; align-items:center; gap:.55rem; }
.status-chip { font-size:.6rem; padding:.35rem .55rem .4rem; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); border-radius:10px; letter-spacing:.6px; text-transform:uppercase; color:var(--text-dim); }

/* Meal list */
.meal-list { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:.65rem; max-height:340px; overflow:auto; scrollbar-width: thin; }
.meal-item { position:relative; padding:.65rem .75rem .7rem; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.04); border-radius:14px; display:flex; flex-direction:column; gap:.35rem; transition: border-color var(--trans), background var(--trans); }
.meal-item:hover { border-color:rgba(255,255,255,.18); background:rgba(255,255,255,.06); }
.mi-head { display:flex; justify-content:space-between; font-size:.85rem; }
.mi-cal { font-weight:600; color:#fbbf24; }
.mi-macros { font-size:.65rem; letter-spacing:.5px; text-transform:uppercase; color:#94a3b8; display:flex; gap:.6rem; }
.mi-actions { display:flex; gap:.4rem; }
.btn.small { padding:.45rem .7rem; font-size:.7rem; }
.btn.xsmall { padding:.35rem .55rem; font-size:.65rem; }
.meal-item .btn.xsmall { box-shadow:none; background:rgba(255,255,255,.08); color:var(--text); }
.meal-item .btn.xsmall:hover { background:rgba(255,255,255,.15); }
.meal-list .empty { text-align:center; padding:.9rem .4rem; font-size:.7rem; color:#64748b; background:rgba(255,255,255,.04); border:1px dashed rgba(255,255,255,.12); border-radius:14px; }

/* History */
.spark-wrap { padding:.4rem .2rem .8rem; }
.history-list { display:flex; flex-direction:column; gap:.4rem; max-height:340px; overflow:auto; scrollbar-width:thin; }
.history-row { display:grid; grid-template-columns: 1fr auto auto; gap:.6rem; align-items:center; font-size:.7rem; background:rgba(255,255,255,.05); padding:.5rem .7rem; border-radius:10px; }
.history-row span:nth-child(2) { font-weight:600; }
.history-row .good { color:#34d399; }
.history-row .bad { color:#ef4444; }
.history-meta { display:flex; justify-content:space-between; align-items:center; gap:1rem; margin-bottom:.4rem; }
.history-meta .filters { display:flex; gap:.4rem; flex-wrap:wrap; }
.history-meta .filters .btn.xsmall { background:rgba(255,255,255,.08); box-shadow:none; }
.history-meta .filters .btn.xsmall.active { background:var(--accent-grad); color:#0f1115; }
.history-meta .stats { display:flex; gap:1.1rem; font-size:.65rem; letter-spacing:.5px; text-transform:uppercase; color:#94a3b8; }
.history-meta .stats strong { font-size:.8rem; margin-left:.25rem; }

/* Sparkline component */
.sparkline { width:100%; height:40px; overflow:visible; }

/* Skeleton loaders */
.skeleton { position:relative; overflow:hidden; background:rgba(255,255,255,.08); border-radius:10px; }
.skeleton::after { content:""; position:absolute; inset:0; background:linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,.18), rgba(255,255,255,0)); transform:translateX(-100%); animation: shimmer 1.3s infinite; }
@keyframes shimmer { 100% { transform: translateX(100%); } }
.sk-line { height:14px; }
.sk-ring { width:130px; height:130px; border-radius:50%; }

/* Profile */
.profile-block { display:flex; flex-direction:column; gap:.5rem; font-size:.8rem; }
.edit-form { margin-top:.6rem; }
.ef-grid { display:grid; gap:.7rem .8rem; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); }
.ef-grid label { display:flex; flex-direction:column; gap:.3rem; font-size:.6rem; text-transform:uppercase; letter-spacing:.5px; color:#8da3b7; font-weight:600; }
.ef-grid input, .ef-grid select { background:rgba(255,255,255,.07); border:1px solid rgba(255,255,255,.14); border-radius:10px; padding:.5rem .6rem; font-size:.72rem; color:var(--text); font-family:inherit; outline:none; }
.ef-grid input:focus, .ef-grid select:focus { border-color:#2dd4bf; }
.ef-actions { margin-top:1rem; display:flex; gap:.6rem; justify-content:flex-end; }
.row-btns { display:flex; gap:.6rem; }

/* Toasts */
.toasts { position:fixed; bottom:18px; right:18px; display:flex; flex-direction:column; gap:.6rem; z-index:100; }
.toast { padding:.65rem .9rem .7rem; background:rgba(30,41,59,.9); backdrop-filter: blur(12px); border:1px solid rgba(255,255,255,.12); border-radius:14px; font-size:.7rem; letter-spacing:.5px; font-weight:500; box-shadow:0 4px 18px -6px rgba(0,0,0,.6); animation: fadeIn .4s ease; }
.toast.success { border-color:#047857; background:rgba(6,95,70,.9); color:#d1fae5; }
.toast.error { border-color:#b91c1c; background:rgba(127,29,29,.92); color:#fee2e2; }
.toast.info { border-color:#1e3a8a; background:rgba(30,64,175,.9); color:#dbeafe; }
@keyframes fadeIn { from { opacity:0; transform: translateY(6px); } to { opacity:1; transform:none; } }

/* Light mode additions */
.light .topbar { background:rgba(255,255,255,.75); border:1px solid rgba(0,0,0,.08); }
.light .meal-item { background:rgba(0,0,0,.04); border-color:rgba(0,0,0,.08); }
.light .meal-item:hover { background:rgba(0,0,0,.07); }
.light .status-chip { background:rgba(0,0,0,.06); border-color:rgba(0,0,0,.08); color:#475569; }
.light .history-row { background:rgba(0,0,0,.05); }
.light .meal-list .empty { background:rgba(0,0,0,.03); border-color:rgba(0,0,0,.1); }

.app { display: flex; flex-direction: column; gap: 2.5rem; }

.hero { text-align: left; position: relative; }
.hero .logo-icon { font-size: 3.2rem; filter: drop-shadow(0 4px 12px rgba(0,0,0,.4)); }
.hero h1 { margin: .2rem 0 .4rem; font-size: 3.4rem; letter-spacing: .5px; background: var(--accent-grad); background-clip: text; -webkit-background-clip: text; color: transparent; }
.hero .tagline { margin: 0; font-size: 1.2rem; color: var(--text-dim); }

.grid { display: grid; gap: 2rem; grid-template-columns: repeat(auto-fit,minmax(300px,1fr)); }

.card { position: relative; border-radius: var(--radius); padding: 1.6rem 1.5rem 1.9rem; background: var(--card); backdrop-filter: blur(22px) saturate(140%); border: 1px solid var(--card-border); box-shadow: 0 6px 18px -4px rgba(0,0,0,.5), 0 2px 4px -1px rgba(0,0,0,.3); transition: transform var(--trans), border-color var(--trans), box-shadow var(--trans); }
.card:hover { transform: translateY(-4px); border-color: rgba(255,255,255,.18); box-shadow: 0 10px 28px -6px rgba(0,0,0,.55), 0 4px 10px -2px rgba(0,0,0,.35); }
.card h2 { margin: 0 0 1.1rem; font-size: 1.2rem; font-weight: 600; letter-spacing: .5px; text-transform: uppercase; color: var(--text); }

.status-line { display:flex; align-items:center; gap:.6rem; margin:.55rem 0; font-size:.95rem; }
.status-line .label { color: var(--text-dim); width: 95px; text-align:right; font-variant: all-small-caps; letter-spacing: .5px; }
.status-line .value { font-weight: 500; }

.btn { border: 0; background: var(--accent-grad); color:#0d1518; font-weight:600; padding:.7rem 1.2rem; border-radius: 14px; cursor:pointer; font-size:.95rem; display:inline-flex; align-items:center; gap:.5rem; box-shadow:0 4px 14px -4px rgba(45,212,191,.5); transition: box-shadow var(--trans), transform var(--trans); }
.btn:disabled { opacity:.55; cursor: default; filter: grayscale(.4); }

.chip { padding:.2rem .65rem .28rem; border-radius: 10px; font-size:.75rem; letter-spacing:.5px; font-weight:600; text-transform:uppercase; background: #374151; color:#d1d5db; }
.chip-ok { background: #065f46; color:#a7f3d0; }
.chip-warn { background:#92400e; color:#fcd34d; }
.chip-bad { background:#7f1d1d; color:#fecaca; }

.features { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:.85rem; }
.features li { display:flex; align-items:center; gap:.6rem; font-size:.95rem; background: linear-gradient(90deg,rgba(255,255,255,.05),rgba(255,255,255,0)); padding:.65rem .85rem; border-radius:12px; position:relative; overflow:hidden; }
.features li.ready { border-left:3px solid #2dd4bf; }
.features li::after { content:""; position:absolute; inset:0; pointer-events:none; opacity:0; background: linear-gradient(120deg,rgba(255,255,255,.15),rgba(255,255,255,0)); transition: opacity var(--trans); }

.badge { font-size:.6rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; background:#1e293b; padding:.25rem .5rem .3rem; border-radius:7px; margin-left:auto; color:#94a3b8; border:1px solid #334155; }
.badge.soon { background:#172554; color:#60a5fa; border-color:#1e3a8a; }
.badge.lock { background:#3f1f4b; color:#f0abfc; border-color:#6d28d9; }

.roadmap { margin:0; padding-left:1.25rem; display:flex; flex-direction:column; gap:.55rem; counter-reset: step; }
.roadmap li { position:relative; padding:.45rem .65rem .55rem .9rem; background: linear-gradient(90deg,rgba(255,255,255,.05),rgba(255,255,255,0)); border-radius:12px; font-size:.9rem; line-height:1.25rem; }
.roadmap li::marker { color:#3b82f6; font-weight:600; }

.users-list { margin-top:1.2rem; background: rgba(4,120,87,.15); border:1px solid rgba(16,185,129,.35); border-radius:14px; padding:1rem .9rem 1.1rem; }
.users-list h3 { margin:.1rem 0 .8rem; font-size:.95rem; letter-spacing:.5px; text-transform:uppercase; color:#34d399; }
.users-list ul { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:.4rem; max-height:220px; overflow-y:auto; scrollbar-width: thin; }
.users-list li { display:flex; justify-content:space-between; font-size:.82rem; background: rgba(255,255,255,.05); padding:.45rem .6rem; border-radius:8px; }
.mono { font-family:'JetBrains Mono','IBM Plex Mono',monospace; opacity:.6; }

footer { text-align:center; margin-top:1rem; font-size:.7rem; letter-spacing:.6px; text-transform:uppercase; color:#64748b; }
.hint { background:rgba(255,255,255,.05); padding:.4rem .7rem .45rem; border-radius:10px; border:1px solid rgba(255,255,255,.08); }

.fade-in { animation: fade .6s ease; }
@keyframes fade { from { opacity:0; transform: translateY(6px); } to { opacity:1; transform: none; } }

.progress-ring { filter: drop-shadow(0 4px 10px rgba(0,0,0,.5)); }
.progress-ring .track { fill:none; stroke:rgba(255,255,255,.08); stroke-width:10; }
.progress-ring .progress { fill:none; stroke:url(#grad) var(--accent, #4ade80); stroke: linear-gradient(90deg,#4ade80,#2dd4bf); stroke-width:10; stroke-linecap:round; transform: rotate(-90deg); transform-origin: 50% 50%; transition: stroke-dashoffset .6s ease; }
.progress-text { font-size: .95rem; font-weight:600; fill: #e2e8f0; }

.daily-grid { display:flex; gap:1.2rem; align-items:center; }
.ring-wrap { position:relative; }
.kpi { flex:1; display:flex; flex-direction:column; gap:.35rem; }
.k-row { display:flex; justify-content:space-between; font-size:.8rem; background:rgba(255,255,255,.05); padding:.4rem .65rem; border-radius:8px; }
.macro-bar { display:flex; height:10px; border-radius:6px; overflow:hidden; margin:.4rem .1rem .2rem; background:rgba(255,255,255,.08); }
.macro { height:100%; transition:width .6s cubic-bezier(.4,.4,.2,1); }
.macro.p { background:#34d399; }
.macro.c { background:#60a5fa; }
.macro.f { background:#fbbf24; }
.mini-msg { font-size:.7rem; letter-spacing:.5px; text-transform:uppercase; color:#94a3b8; margin-top:.2rem; }
.macro-goals, .forecast-block { display:flex; flex-direction:column; gap:.4rem; font-size:.75rem; }
.macro-goals .mg-row, .forecast-block .mg-row { display:flex; justify-content:space-between; background:rgba(255,255,255,.05); padding:.4rem .6rem; border-radius:8px; }
.macro-goals .mg-row span, .forecast-block .mg-row span { color:#94a3b8; letter-spacing:.5px; text-transform:uppercase; font-size:.6rem; }
.macro-goals strong, .forecast-block strong { font-weight:600; }
.placeholder { font-size:.8rem; color:#64748b; padding:.6rem .4rem; }
.controls-row { display:flex; gap:.5rem; margin: .9rem 0 1rem; }
.select { flex:1; background:rgba(255,255,255,.07); border:1px solid rgba(255,255,255,.15); color:var(--text); padding:.55rem .7rem; border-radius:12px; font-size:.8rem; font-family:inherit; outline:none; transition: border-color var(--trans), background var(--trans); }
.select:focus { border-color:#2dd4bf; background:rgba(255,255,255,.1); }
.btn.ghost { background:rgba(255,255,255,.08); color:var(--text); box-shadow:none; }
.btn.ghost:hover { background:rgba(255,255,255,.15); box-shadow:0 4px 12px -4px rgba(0,0,0,.4); }
.users-list.compact ul { max-height:150px; }
.users-list.compact li.sel { outline:2px solid #2dd4bf; }
.more { margin-top:.4rem; font-size:.65rem; text-align:center; opacity:.6; }
.summary-card { min-height:260px; }

/* Profile overview additions */
.profile-overview .kpi-compact { gap:.6rem; }
.profile-overview .delta-neg { font-style:normal; color:#34d399; margin-left:.3rem; }
.profile-overview .delta-pos { font-style:normal; color:#f87171; margin-left:.3rem; }
.profile-overview .meal-list-compact { max-height:140px; }
.profile-overview .meal-item-compact { padding:.4rem .55rem; }
.mt-1 { margin-top:1rem; }
.mt-04 { margin-top:.4rem; }

/* Sparkline weight history */
.spark-head { display:flex; justify-content:space-between; align-items:center; }
.spark-label { font-size:.6rem; letter-spacing:.5px; text-transform:uppercase; color:#94a3b8; }
.spark-range { font-size:.6rem; color:#94a3b8; }
.spark-loading { height:18px; margin-top:.3rem; }
.spark-empty { font-size:.6rem; color:#64748b; margin-top:.25rem; }

/* Mini macros block */
.macro-mini { margin-top:.6rem; display:flex; flex-direction:column; gap:.35rem; }
.macro-mini-row { display:grid; grid-template-columns:64px 1fr auto; align-items:center; gap:.55rem; font-size:.65rem; background:rgba(255,255,255,.05); padding:.35rem .55rem; border-radius:8px; }
.macro-mini-row .mm-label { color:#94a3b8; letter-spacing:.5px; text-transform:uppercase; font-weight:600; }
.macro-mini-row .mm-bar { position:relative; height:6px; background:rgba(255,255,255,.08); border-radius:4px; overflow:hidden; }
.macro-mini-row .mm-fill { position:absolute; inset:0 0 0 0; width:0%; background:linear-gradient(90deg,#34d399,#2dd4bf); transition: width .7s cubic-bezier(.4,.4,.2,1); }
.macro-mini-row .mm-fill.carbs { background:linear-gradient(90deg,#60a5fa,#3b82f6); }
.macro-mini-row .mm-fill.fat { background:linear-gradient(90deg,#fbbf24,#f59e0b); }
.macro-mini-row .mm-val { font-weight:600; font-size:.65rem; }
.mm-fill.p0 { width:0%; }
.mm-fill.p5 { width:5%; }
.mm-fill.p10 { width:10%; }
.mm-fill.p15 { width:15%; }
.mm-fill.p20 { width:20%; }
.mm-fill.p25 { width:25%; }
.mm-fill.p30 { width:30%; }
.mm-fill.p35 { width:35%; }
.mm-fill.p40 { width:40%; }
.mm-fill.p45 { width:45%; }
.mm-fill.p50 { width:50%; }
.mm-fill.p55 { width:55%; }
.mm-fill.p60 { width:60%; }
.mm-fill.p65 { width:65%; }
.mm-fill.p70 { width:70%; }
.mm-fill.p75 { width:75%; }
.mm-fill.p80 { width:80%; }
.mm-fill.p85 { width:85%; }
.mm-fill.p90 { width:90%; }
.mm-fill.p95 { width:95%; }
.mm-fill.p100 { width:100%; }

/* Achievements */
.ach-block { margin-top:.8rem; }
.ach-title { font-size:.6rem; letter-spacing:.5px; text-transform:uppercase; color:#94a3b8; margin-bottom:.3rem; }
.ach-list { display:flex; flex-wrap:wrap; gap:.4rem; }
.ach-badge { font-size:.55rem; padding:.28rem .5rem .32rem; border-radius:10px; letter-spacing:.5px; background:rgba(255,255,255,.07); color:#d1d5db; border:1px solid rgba(255,255,255,.12); font-weight:600; text-transform:uppercase; }
.ach-badge.done { background:linear-gradient(135deg,#059669,#10b981); color:#ecfdf5; border-color:#047857; }

.modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.55); -webkit-backdrop-filter: blur(8px); backdrop-filter: blur(8px); display:flex; justify-content:center; align-items:flex-start; padding:5vh 1rem; z-index:50; }
.modal { background:rgba(20,24,32,.9); border:1px solid rgba(255,255,255,.08); border-radius:24px; padding:1.8rem 1.6rem 2.1rem; width:min(880px,100%); box-shadow:0 10px 40px -10px rgba(0,0,0,.6); }
.modal h2 { margin:0 0 1.2rem; font-size:1.4rem; background:var(--accent-grad); -webkit-background-clip:text; background-clip:text; color:transparent; }
.form-grid { display:grid; gap:.9rem .9rem; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); }
.form-grid label { display:flex; flex-direction:column; gap:.35rem; font-size:.7rem; letter-spacing:.5px; text-transform:uppercase; color:#97a6b5; font-weight:600; }
.form-grid input, .form-grid select { background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.12); color:var(--text); padding:.55rem .7rem; border-radius:12px; font-size:.8rem; font-family:inherit; outline:none; transition: border-color var(--trans), background var(--trans); }
.form-grid input:focus, .form-grid select:focus { border-color:#2dd4bf; background:rgba(255,255,255,.09); }
.modal-actions { margin-top:1.4rem; display:flex; justify-content:flex-end; gap:.7rem; }
.theme-toggle { position:fixed; top:12px; right:14px; z-index:60; }
.light body { background:#f5f7fa; }
.light #root { color:#1e293b; }
.light .card { background:rgba(255,255,255,.65); border:1px solid rgba(0,0,0,.08); }
.light .modal { background:#ffffffea; }
.light .btn.ghost { background:rgba(0,0,0,.06); }
.light .select { background:rgba(0,0,0,.04); color:#1e293b; }

@media (max-width:640px) {
  #root { padding: 1.3rem 1rem 2.5rem; max-width: 100%; }
  .hero h1 { font-size: 2.1rem; }
  .hero .logo-icon { font-size: 2.6rem; }
  .grid { display:flex; flex-direction:column; gap:1rem; }
  .card { padding:1.05rem .95rem 1.25rem; border-radius:20px; }
  .status-line { font-size:.78rem; }
  .controls-row { flex-wrap:wrap; }
  .select { min-width:140px; flex: 1 1 140px; }
  .btn { flex: 1 1 auto; justify-content:center; }
  .daily-grid { flex-direction:column; align-items:stretch; }
  .ring-wrap { display:flex; justify-content:center; }
  .kpi { gap:.25rem; }
  .k-row { font-size:.72rem; padding:.35rem .55rem; }
  .features li { font-size:.78rem; }
  .roadmap li { font-size:.72rem; }
  .modal { padding:1.3rem 1.1rem 1.6rem; border-radius:20px; }
  .form-grid { grid-template-columns:repeat(auto-fill,minmax(130px,1fr)); gap:.65rem; }
  .form-grid input, .form-grid select { padding:.45rem .55rem; font-size:.72rem; }
  .modal-actions { flex-direction:column-reverse; }
  .modal-actions .btn, .modal-actions .btn.ghost { width:100%; }
  .users-list ul { max-height:120px; }
  .progress-ring { width:110px; height:110px; }
  .progress-text { font-size:.8rem; }
}

/* Ultra narrow (watch / very small) */
@media (max-width:380px) {
  .hero h1 { font-size:1.8rem; }
  .controls-row { gap:.4rem; }
  .btn { padding:.55rem .6rem; font-size:.7rem; }
  .select { font-size:.7rem; }
}

/* Landscape mobile optimization */
@media (max-height:520px) and (orientation:landscape) {
  #root { padding: .8rem .9rem 1.2rem; }
  .hero { display:flex; align-items:center; gap:.9rem; }
  .hero .tagline { font-size:.85rem; }
  .grid { gap:.6rem; }
  .card { padding:.75rem .8rem 1rem; }
  .modal { max-height:90vh; overflow:auto; }
}
